!function(a,c,b){if(typeof module!=="undefined"){module.exports=b(a,c)}else{if(typeof define==="function"&&typeof define.amd==="object"){define(b)}else{c[a]=b(a,c)}}}("humane",this,function(c,d){var f=window;var e=document;var b={on:function(i,h,g){"addEventListener" in f?i.addEventListener(h,g,false):i.attachEvent("on"+h,g)},off:function(i,h,g){"removeEventListener" in f?i.removeEventListener(h,g,false):i.detachEvent("on"+h,g)},bind:function(h,g){return function(){h.apply(g,arguments)}},isArray:Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"},config:function(g,h){return g!=null?g:h},transSupport:false,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var g=e.createElement("div");var i={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(var h in i){if(h+"Transition" in g.style){this.vendorPrefix=i[h];this.transSupport=true}}}};b._checkTransition();var a=function(h){h||(h={});this.queue=[];this.baseCls=h.baseCls||"humane";this.addnCls=h.addnCls||"";this.timeout="timeout" in h?h.timeout:2500;this.waitForMove=h.waitForMove||false;this.clickToClose=h.clickToClose||false;this.timeoutAfterMove=h.timeoutAfterMove||false;this.container=h.container;try{this._setupEl()}catch(g){b.on(f,"load",b.bind(this._setupEl,this))}};a.prototype={constructor:a,_setupEl:function(){var g=e.createElement("div");g.style.display="none";if(!this.container){if(e.body){this.container=e.body}else{throw"document.body is null"}}this.container.appendChild(g);this.el=g;this.removeEvent=b.bind(function(){var h=b.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);if(!h){this.remove()}else{setTimeout(b.bind(this.remove,this),h)}},this);this.transEvent=b.bind(this._afterAnimation,this);this._run()},_afterTimeout:function(){if(!b.config(this.currentMsg.waitForMove,this.waitForMove)){this.remove()}else{if(!this.removeEventsSet){b.on(e.body,"mousemove",this.removeEvent);b.on(e.body,"click",this.removeEvent);b.on(e.body,"keypress",this.removeEvent);b.on(e.body,"touchstart",this.removeEvent);this.removeEventsSet=true}}},_run:function(){if(this._animating||!this.queue.length||!this.el){return}this._animating=true;if(this.currentTimer){clearTimeout(this.currentTimer);this.currentTimer=null}var i=this.queue.shift();var h=b.config(i.clickToClose,this.clickToClose);if(h){b.on(this.el,"click",this.removeEvent);b.on(this.el,"touchstart",this.removeEvent)}var g=b.config(i.timeout,this.timeout);if(g>0){this.currentTimer=setTimeout(b.bind(this._afterTimeout,this),g)}if(b.isArray(i.html)){i.html="<ul><li>"+i.html.join("<li>")+"</ul>"}this.el.innerHTML=i.html;this.currentMsg=i;this.el.className=this.baseCls;if(b.transSupport){this.el.style.display="block";setTimeout(b.bind(this._showMsg,this),50)}else{this._showMsg()}},_setOpacity:function(g){if(b.useFilter){try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=g*100}catch(h){}}else{this.el.style.opacity=String(g)}},_showMsg:function(){var j=b.config(this.currentMsg.addnCls,this.addnCls);if(b.transSupport){this.el.className=this.baseCls+" "+j+" "+this.baseCls+"-animate"}else{var i=0;this.el.className=this.baseCls+" "+j+" "+this.baseCls+"-js-animate";this._setOpacity(0);this.el.style.display="block";var h=this;var g=setInterval(function(){if(i<1){i+=0.1;if(i>1){i=1}h._setOpacity(i)}else{clearInterval(g)}},30)}},_hideMsg:function(){var j=b.config(this.currentMsg.addnCls,this.addnCls);if(b.transSupport){this.el.className=this.baseCls+" "+j;b.on(this.el,b.vendorPrefix?b.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent)}else{var i=1;var h=this;var g=setInterval(function(){if(i>0){i-=0.1;if(i<0){i=0}h._setOpacity(i)}else{h.el.className=h.baseCls+" "+j;clearInterval(g);h._afterAnimation()}},30)}},_afterAnimation:function(){if(b.transSupport){b.off(this.el,b.vendorPrefix?b.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent)}if(this.currentMsg.cb){this.currentMsg.cb()}this.el.style.display="none";this._animating=false;this._run()},remove:function(h){var g=typeof h=="function"?h:null;b.off(e.body,"mousemove",this.removeEvent);b.off(e.body,"click",this.removeEvent);b.off(e.body,"keypress",this.removeEvent);b.off(e.body,"touchstart",this.removeEvent);b.off(this.el,"click",this.removeEvent);b.off(this.el,"touchstart",this.removeEvent);this.removeEventsSet=false;if(g&&this.currentMsg){this.currentMsg.cb=g}if(this._animating){this._hideMsg()}else{if(g){g()}}},log:function(i,l,g,j){var k={};if(j){for(var h in j){k[h]=j[h]}}if(typeof l=="function"){g=l}else{if(l){for(var h in l){k[h]=l[h]}}}k.html=i;if(g){k.cb=g}this.queue.push(k);this._run();return this},spawn:function(h){var g=this;return function(j,k,i){g.log.call(g,j,k,i,h);return g}},create:function(g){return new a(g)}};return new a()});